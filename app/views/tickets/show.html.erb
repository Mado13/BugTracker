<h1 class="title">Ticket #<%= @ticket.id %></h1>

<small class="add-edit-record">
  <%=link_to edit_ticket_path(@ticket) do %>
    <i class="far fa-edit fa-2x"></i>
  <% end %>
</small>

<div id="ticket-and-comments">
  <div id="ticket-info-section" >
    <table class="table">
        <thead>
          <th>Title</th>
          <th>Priority</th>
          <th>Status</th>
          <th>Category</th>
          <th>Project</th>
        <thead>
        <tbody>
          </tr>
            <td><%= @ticket.title %></td>
            <td><%= @ticket.priority %></td>
            <td><%= @ticket.status %></td>
            <td><%= @ticket.category %></td>
            <td><%= link_to @ticket.project.title, project_path(@ticket.project) %></td>
          </tr>
        </tbody>
      </table>
      <br>
      <div><strong>Description:</strong></div>
      <p id="ticket-description"><%= @ticket.description %></p>

    <div id="assigned-developers">
      <h3 class="title">Assigned Developers</h3>
      <table class="table table-striped">
        <thead>
          <th>Name</th>
          <th>Surname</th>
          <th>Email</th>
        <thead>
        <tbody>
          <%= render partial: 'developer', collection: @ticket.developers, as: :developer %>
        </tbody>
      </table>
    </div>

    <div id="ticket-details">
      <h3 class="title">Ticket Details</h3>
      <table class="table">
        <thead>
          <th>Submitter</th>
          <th>Last update</th>
          <th>Created on</th>
        </thead>
        <tbody>
          <tr>
            <td><%= @ticket.lead_developer.email %></td>
            <td><%= @ticket.updated_at.to_s(:short) %></td>
            <td><%= @ticket.created_at.to_s(:short) %></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div id="comments-section">
    <h3 class="title"> Add a Comment </h3>
    <%= render partial: 'comments/form' %>



    <h3 class="title"> Comments </h3>

    <%= turbo_stream_from 'comments' %>
    <%= turbo_frame_tag 'comments' do %>
    <ul class="list-group">
      <%= render @ticket_comments %>
    </ul>
  </div>
</div>
<% end %>
